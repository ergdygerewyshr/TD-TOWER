<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />

<style id="webmakerstyle">
body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #fff;
    margin: 0;
    overflow: hidden;
}

#stats {
    position: absolute;
    top: 5px;
    left: 5px;
    background: rgba(0,0,0,0.7);
    padding: 10px;
    border-radius: 5px;
    z-index: 10;
}

#towerShop {
    position: absolute;
    left: 5px;
    bottom: 5px;
    background: rgba(0,0,0,0.7);
    padding: 10px;
    border-radius: 5px;
    width: 200px;
}

#towerShop h3 {
    margin-top: 0;
}

#towers button {
    width: 100%;
    margin: 2px 0;
}

#codePanel {
    position: absolute;
    top: 5px;
    right: 5px;
    background: rgba(0,0,0,0.7);
    padding: 10px;
    border-radius: 5px;
}

.gui {
    position: absolute;
    background: rgba(30,30,30,0.9);
    padding: 10px;
    border: 2px solid #fff;
    border-radius: 8px;
    cursor: move;
    z-index: 20;
}

canvas {
    display: block;
    background: #111;
    margin: 0 auto;
}

</style>
</head>
<body>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Toloando TD Game</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="stats">
    <p id="lives">Lives: 10</p>
    <p id="money">Money: 100</p>
    <p id="kills">Kills: 0</p>
</div>

<div id="towerShop">
    <h3>Tower Shop</h3>
    <div id="towers"></div>
</div>

<div id="codePanel">
    <input type="text" id="codeInput" placeholder="Enter code">
    <button id="codeBtn">Enter</button>
</div>

<!-- Owner GUI -->
<div class="gui movable" id="ownerGui" style="display:none;">
    <h3>Owner GUI</h3>
    <p>Lives: <input type="number" id="ownerLives" value="10"></p>
    <p>Money: <input type="number" id="ownerMoney" value="100"></p>
    <p><button id="ownerApply">Apply Stats</button></p>
    <p>Add Tower:</p>
    <button data-tower="powerline" class="ownerTowerBtn">Powerline Tower</button>
</div>

<!-- Electric GUI -->
<div class="gui movable" id="electricGui" style="display:none;">
    <h3>Electric GUI</h3>
    <p>Add Blue Lightning Tower:</p>
    <button data-tower="blueLightning" class="electricTowerBtn">Add Tower</button>
</div>

<!-- Admin GUI -->
<div class="gui movable" id="adminGui" style="display:none;">
    <h3>Admin GUI</h3>
    <p>Lives: <input type="number" id="adminLives" value="10"></p>
    <p>Money: <input type="number" id="adminMoney" value="100"></p>
    <p><button id="adminApply">Apply Stats</button></p>
</div>

<canvas id="gameCanvas" width="800" height="500"></canvas>

<script src="script.js"></script>
</body>
</html>


<script>const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let lives = 10;
let money = 100;
let kills = 0;
let enemies = [];
let towers = [];
let bullets = [];
let towerShopData = [
    {name:"Basic Tower", price:50, damage:20},
    {name:"Fast Tower", price:80, damage:10},
];

let maxTowers = 30;

// --- STATS UPDATE ---
function updateStats(){
    document.getElementById("lives").innerText = `Lives: ${lives}`;
    document.getElementById("money").innerText = `Money: ${money}`;
    document.getElementById("kills").innerText = `Kills: ${kills}`;
}

// --- SPAWN ENEMIES ---
function spawnEnemy(){
    const y = Math.random() * (canvas.height - 40);
    const hp = 50 + kills*2;
    enemies.push({x:0,y:y,width:30,height:30,hp:hp,maxHp:hp,speed:1});
}

// --- TOWER SHOP ---
const towerDiv = document.getElementById("towers");
function renderShop(){
    towerDiv.innerHTML = "";
    towerShopData.forEach((t,i)=>{
        const btn = document.createElement("button");
        btn.innerText = `${t.name} ($${t.price})`;
        btn.onclick = ()=>{
            if(money>=t.price && towers.length<maxTowers){
                money -= t.price;
                towers.push({x:50, y:canvas.height-50-(towers.length*50), width:30,height:30,damage:t.damage,rate:30,lastShot:0,type:t.name});
                updateStats();
            }
        };
        towerDiv.appendChild(btn);
    });
}
renderShop();

// --- BULLETS ---
function shoot(tower,enemy){
    bullets.push({x:tower.x+15,y:tower.y+15,target:enemy,damage:tower.damage});
}

// --- GAME LOOP ---
function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Spawn enemies
    if(Math.random()<0.01) spawnEnemy();

    // Draw enemies
    enemies.forEach((e,ei)=>{
        e.x += e.speed;

        // Draw enemy
        ctx.fillStyle = "red";
        ctx.fillRect(e.x,e.y,e.width,e.height);

        // Draw HP bar
        const hpRatio = e.hp/e.maxHp;
        ctx.fillStyle = "green";
        ctx.fillRect(e.x,e.y-6,e.width*hpRatio,4);
        ctx.strokeStyle = "black";
        ctx.strokeRect(e.x,e.y-6,e.width,4);

        // Enemy death
        if(e.hp<=0){
            enemies.splice(ei,1);
            kills++;
            money +=10;
            updateStats();
        }

        // Reached end
        if(e.x>canvas.width){
            enemies.splice(ei,1);
            lives--;
            updateStats();
        }
    });

    // Towers shoot
    towers.forEach(t=>{
        let target = enemies.find(e=>e.x>t.x);
        if(target && t.lastShot>t.rate){
            shoot(t,target);
            t.lastShot=0;
        }
        t.lastShot++;
        ctx.fillStyle = "blue";
        ctx.fillRect(t.x,t.y,t.width,t.height);
    });

    // Bullets move
    bullets.forEach((b,bi)=>{
        if(!b.target) return;
        const dx = b.target.x-b.x;
        const dy = b.target.y-b.y;
        const dist = Math.sqrt(dx*dx+dy*dy);
        const speed = 5;
        b.x += dx/dist*speed;
        b.y += dy/dist*speed;

        // Collision
        if(dist<5){
            b.target.hp -= b.damage;
            bullets.splice(bi,1);
        }

        ctx.fillStyle = "yellow";
        ctx.beginPath();
        ctx.arc(b.x,b.y,4,0,Math.PI*2);
        ctx.fill();
    });

    requestAnimationFrame(gameLoop);
}
gameLoop();

// --- CODE PANEL ---
const codeInput = document.getElementById("codeInput");
document.getElementById("codeBtn").onclick = ()=>{
    const code = codeInput.value.toUpperCase();
    if(code==="STELLAROSE") document.getElementById("ownerGui").style.display="block";
    if(code==="ELECTRICTY") document.getElementById("electricGui").style.display="block";
    if(code==="ADMIN") document.getElementById("adminGui").style.display="block";
};

// --- OWNER GUI APPLY ---
document.getElementById("ownerApply").onclick = ()=>{
    lives = parseInt(document.getElementById("ownerLives").value);
    money = parseInt(document.getElementById("ownerMoney").value);
    updateStats();
};

// --- ELECTRIC GUI ADD TOWER ---
document.querySelector(".electricTowerBtn").onclick = ()=>{
    towerShopData.push({name:"Blue Lightning",price:0,damage:500});
    renderShop();
};

// --- OWNER GUI ADD POWERLINE ---
document.querySelector(".ownerTowerBtn").onclick = ()=>{
    towerShopData.push({name:"Powerline",price:0,damage:5000});
    renderShop();
};

// --- ADMIN GUI APPLY ---
document.getElementById("adminApply").onclick = ()=>{
    lives = parseInt(document.getElementById("adminLives").value);
    money = parseInt(document.getElementById("adminMoney").value);
    updateStats();
};

// --- MAKE GUI MOVABLE ---
const guis = document.querySelectorAll(".movable");
guis.forEach(gui=>{
    let isDragging=false, offsetX, offsetY;
    gui.addEventListener("mousedown",e=>{
        isDragging=true;
        offsetX=e.offsetX;
        offsetY=e.offsetY;
    });
    window.addEventListener("mouseup",()=>isDragging=false);
    window.addEventListener("mousemove",e=>{
        if(isDragging){
            gui.style.left = (e.clientX-offsetX)+"px";
            gui.style.top = (e.clientY-offsetY)+"px";
        }
    });
});

//# sourceURL=userscript.js
</script>
</body>
</html>